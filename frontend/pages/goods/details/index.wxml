<view class="goods-detail-page">
  <view class="goods-head">
    <t-swiper wx:if="{{details.images.length > 0}}" height="750rpx" current="{{current}}" autoplay="{{autoplay}}" duration="{{duration}}" interval="{{interval}}" navigation="{{navigation}}" list="{{details.images}}"></t-swiper>
    <view class="goods-info">
      <view wx:for="{{ good.spuTagList }}" wx:key="index" wx:for-item="tag" class="goods-card__tag" data-index="{{index}}">
        <button class="tag-wrapper" bindtap="onTagTap" data-title="{{tag.title}}">{{tag.title}}</button>
      </view>
      <view class="goods-title" style="display: flex; justify-content: space-between; align-items: center; padding: 0 10rpx; width: 100%; flex-wrap: wrap;">
        <view class="title-container" style="display: flex; flex-direction: column; align-items: flex-start; flex: 1; overflow: hidden;">
          <view class="goods-name" style="font-weight: bold; text-align: left; word-break: break-word;  word-wrap: break-word;white-space: normal; font-size: 28rpx; overflow: hidden;">
            {{good.title}}
          </view>
          <view class="goods-name" style="font-weight: normal; text-align: left; word-break: break-word; white-space: normal; font-size: 20rpx; color: #666; overflow: hidden;">
            {{good.title_ch}}
          </view>
        </view>

        <!-- Buttons Container -->
        <view style="display: flex; flex-direction: row; align-items: center; margin-left: 10rpx;">
          <view class="navigate-btn" style="margin-bottom: 5rpx;">
            <t-button t-class="navBtn" theme="primary" shape="round" bind:tap="onNavigateButtonTap" style="padding: 5rpx 10rpx;">
              <view class="btn-icon">
                <view class="nav-text">Ask For Help</view>
              </view>
            </t-button>
          </view>

          <!-- Share Button -->
          <view class="goods-tag">
            <t-button open-type="share" t-class="shareBtn" variant="text" style="padding: 5rpx 10rpx;">
              <view class="btn-icon" style="display: flex; align-items: center;">
                <t-icon name="share" size="40rpx" color="#000" />
                <view class="share-text" style="margin-left: 5rpx;">Share</view>
              </view>
            </t-button>
          </view>

          <!-- Star Button -->
          <view class="goods-card__down">
            <t-icon class="goods-card__add-cart" prefix="wr" name="star" id="{{independentID}}-cart" data-id="{{independentID}}" catchtap="addCartHandle" size="40rpx" color="#FA550F" style="margin-left: 5rpx;" />
          </view>
        </view>
      </view>

      <view class="goods-description">{{details.description}}</view>
      <view class="goods-intro">{{intro}}</view>
    </view>

    <view wx:if="{{ commentsStatistics.commentCount > 0 }}" class="comments-wrap">
      <view class="comments-head" bindtap="navToCommentsListPage">
        <view class="comments-title-wrap">
          <view class="comments-title-label">comments</view>
        </view>
        <view class="comments-rate-wrap">
          <t-icon name="chevron-right" size="40rpx" color="#BBBBBB" />
        </view>
      </view>
      <view class="comment-item-wrap" wx:for="{{ commentsList }}" wx:for-item="commentItem" wx:key="goodsSpu">
        <view class="comment-item-head">
          <t-image src="{{commentItem.userHeadUrl}}" t-class="comment-item-avatar" />
          <view class="comment-head-right">
            <view class="comment-username">{{commentItem.userName}}</view>
            <t-rate value="{{ commentItem.commentScore }}" count="{{5}}" size="12" gap="2" color="{{['#ffc51c', '#ddd']}}" />
          </view>
        </view>
        <view class="comment-item-content"> {{commentItem.commentContent}} </view>
      </view>
    </view>
  </view>
  <view class="add-comment-btn-wrap">
    <t-button bindtap="goToCreateComment" t-class="addCommentBtn" variant="outline">
      <view class="btn-icon">
        <t-icon name="edit" size="50rpx" color="#000" />
        <view class="add-comment-text">Write a comment</view>
      </view>
    </t-button>
  </view>
</view>
<t-toast id="t-toast" />